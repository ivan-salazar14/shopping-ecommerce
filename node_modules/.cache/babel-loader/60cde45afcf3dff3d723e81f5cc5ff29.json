{"ast":null,"code":"import _classCallCheck from \"/home/ivan/Documents/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ivan/Documents/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ivan/Documents/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ivan/Documents/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ivan/Documents/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ivan/Documents/react-shopping-cart/src/components/FloatCart/index.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { loadCart, removeProduct, changeProductQuantity } from '../../services/cart/actions';\nimport { updateCart } from '../../services/total/actions';\nimport CartProduct from './CartProduct';\nimport { formatPrice } from '../../services/util';\nimport './style.scss';\n\nvar FloatCart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FloatCart, _Component);\n\n  function FloatCart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FloatCart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FloatCart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isOpen: false\n    };\n\n    _this.openFloatCart = function () {\n      _this.setState({\n        isOpen: true\n      });\n    };\n\n    _this.closeFloatCart = function () {\n      _this.setState({\n        isOpen: false\n      });\n    };\n\n    _this.addProduct = function (product) {\n      var _this$props = _this.props,\n          cartProducts = _this$props.cartProducts,\n          updateCart = _this$props.updateCart;\n      var productAlreadyInCart = false;\n      cartProducts.forEach(function (cp) {\n        if (cp.id === product.id) {\n          cp.quantity += product.quantity;\n          productAlreadyInCart = true;\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartProducts.push(product);\n      }\n\n      updateCart(cartProducts);\n\n      _this.openFloatCart();\n    };\n\n    _this.removeProduct = function (product) {\n      var _this$props2 = _this.props,\n          cartProducts = _this$props2.cartProducts,\n          updateCart = _this$props2.updateCart;\n      var index = cartProducts.findIndex(function (p) {\n        return p.id === product.id;\n      });\n\n      if (index >= 0) {\n        cartProducts.splice(index, 1);\n        updateCart(cartProducts);\n      }\n    };\n\n    _this.proceedToCheckout = function () {\n      var _this$props$cartTotal = _this.props.cartTotal,\n          totalPrice = _this$props$cartTotal.totalPrice,\n          productQuantity = _this$props$cartTotal.productQuantity,\n          currencyFormat = _this$props$cartTotal.currencyFormat,\n          currencyId = _this$props$cartTotal.currencyId;\n\n      if (!productQuantity) {\n        alert('Add some product in the cart!');\n      } else {\n        alert(\"Checkout - Subtotal: \".concat(currencyFormat, \" \").concat(formatPrice(totalPrice, currencyId)));\n      }\n    };\n\n    _this.changeProductQuantity = function (changedProduct) {\n      var _this$props3 = _this.props,\n          cartProducts = _this$props3.cartProducts,\n          updateCart = _this$props3.updateCart;\n      var product = cartProducts.find(function (p) {\n        return p.id === changedProduct.id;\n      });\n      product.quantity = changedProduct.quantity;\n\n      if (product.quantity <= 0) {\n        _this.removeProduct(product);\n      }\n\n      updateCart(cartProducts);\n    };\n\n    return _this;\n  }\n\n  _createClass(FloatCart, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.newProduct !== this.props.newProduct) {\n        this.addProduct(nextProps.newProduct);\n      }\n\n      if (nextProps.productToRemove !== this.props.productToRemove) {\n        this.removeProduct(nextProps.productToRemove);\n      }\n\n      if (nextProps.productToChange !== this.props.productToChange) {\n        this.changeProductQuantity(nextProps.productToChange);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          cartTotal = _this$props4.cartTotal,\n          cartProducts = _this$props4.cartProducts,\n          removeProduct = _this$props4.removeProduct,\n          changeProductQuantity = _this$props4.changeProductQuantity;\n      var products = cartProducts.map(function (p) {\n        return React.createElement(CartProduct, {\n          product: p,\n          removeProduct: removeProduct,\n          changeProductQuantity: changeProductQuantity,\n          key: p.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        });\n      });\n      var classes = ['float-cart'];\n\n      if (!!this.state.isOpen) {\n        classes.push('float-cart--open');\n      }\n\n      return React.createElement(\"div\", {\n        className: classes.join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, this.state.isOpen && React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.closeFloatCart();\n        },\n        className: \"float-cart__close-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"X\"), !this.state.isOpen && React.createElement(\"span\", {\n        onClick: function onClick() {\n          return _this2.openFloatCart();\n        },\n        className: \"bag bag--float-cart-closed\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"bag__quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, cartTotal.productQuantity)), React.createElement(\"div\", {\n        className: \"float-cart__content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"float-cart__header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"bag\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"bag__quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, cartTotal.productQuantity)), React.createElement(\"span\", {\n        className: \"header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Cart\")), React.createElement(\"div\", {\n        className: \"float-cart__shelf-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, products, !products.length && React.createElement(\"p\", {\n        className: \"shelf-empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Add some products in the cart \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), \":)\")), React.createElement(\"div\", {\n        className: \"float-cart__footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sub\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"SUBTOTAL\"), React.createElement(\"div\", {\n        className: \"sub-price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"sub-price__val\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"\".concat(cartTotal.currencyFormat, \" \").concat(formatPrice(cartTotal.totalPrice, cartTotal.currencyId))), React.createElement(\"small\", {\n        className: \"sub-price__installment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, !!cartTotal.installments && React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"OR UP TO \".concat(cartTotal.installments, \" x \").concat(cartTotal.currencyFormat, \" \").concat(formatPrice(cartTotal.totalPrice / cartTotal.installments, cartTotal.currencyId))))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Nombre:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Direccion:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Telefono:\", React.createElement(\"input\", {\n        type: \"number\",\n        name: \"phone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.proceedToCheckout();\n        },\n        className: \"buy-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Checkout\"))));\n    }\n  }]);\n\n  return FloatCart;\n}(Component);\n\nFloatCart.propTypes = {\n  loadCart: PropTypes.func.isRequired,\n  updateCart: PropTypes.func.isRequired,\n  cartProducts: PropTypes.array.isRequired,\n  newProduct: PropTypes.object,\n  removeProduct: PropTypes.func,\n  productToRemove: PropTypes.object,\n  changeProductQuantity: PropTypes.func,\n  productToChange: PropTypes.object\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    cartProducts: state.cart.products,\n    newProduct: state.cart.productToAdd,\n    productToRemove: state.cart.productToRemove,\n    productToChange: state.cart.productToChange,\n    cartTotal: state.total.data\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loadCart: loadCart,\n  updateCart: updateCart,\n  removeProduct: removeProduct,\n  changeProductQuantity: changeProductQuantity\n})(FloatCart);","map":{"version":3,"sources":["/home/ivan/Documents/react-shopping-cart/src/components/FloatCart/index.js"],"names":["React","Component","PropTypes","connect","loadCart","removeProduct","changeProductQuantity","updateCart","CartProduct","formatPrice","FloatCart","state","isOpen","openFloatCart","setState","closeFloatCart","addProduct","product","props","cartProducts","productAlreadyInCart","forEach","cp","id","quantity","push","index","findIndex","p","splice","proceedToCheckout","cartTotal","totalPrice","productQuantity","currencyFormat","currencyId","alert","changedProduct","find","nextProps","newProduct","productToRemove","productToChange","products","map","classes","join","length","installments","propTypes","func","isRequired","array","object","mapStateToProps","cart","productToAdd","total","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { connect } from 'react-redux';\nimport { loadCart, removeProduct, changeProductQuantity } from '../../services/cart/actions';\nimport { updateCart } from '../../services/total/actions';\nimport CartProduct from './CartProduct';\nimport { formatPrice } from '../../services/util';\n\nimport './style.scss';\n\nclass FloatCart extends Component {\n  static propTypes = {\n    loadCart: PropTypes.func.isRequired,\n    updateCart: PropTypes.func.isRequired,\n    cartProducts: PropTypes.array.isRequired,\n    newProduct: PropTypes.object,\n    removeProduct: PropTypes.func,\n    productToRemove: PropTypes.object,\n    changeProductQuantity: PropTypes.func,\n    productToChange: PropTypes.object,\n  };\n\n  state = {\n    isOpen: false\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.newProduct !== this.props.newProduct) {\n      this.addProduct(nextProps.newProduct);\n    }\n\n    if (nextProps.productToRemove !== this.props.productToRemove) {\n      this.removeProduct(nextProps.productToRemove);\n    }\n\n    if (nextProps.productToChange !== this.props.productToChange) {\n      this.changeProductQuantity(nextProps.productToChange);\n    }\n  }\n\n  openFloatCart = () => {\n    this.setState({ isOpen: true });\n  };\n\n  closeFloatCart = () => {\n    this.setState({ isOpen: false });\n  };\n\n  addProduct = product => {\n    const { cartProducts, updateCart } = this.props;\n    let productAlreadyInCart = false;\n\n    cartProducts.forEach(cp => {\n      if (cp.id === product.id) {\n        cp.quantity += product.quantity;\n        productAlreadyInCart = true;\n      }\n    });\n\n    if (!productAlreadyInCart) {\n      cartProducts.push(product);\n    }\n\n    updateCart(cartProducts);\n    this.openFloatCart();\n  };\n\n  removeProduct = product => {\n    const { cartProducts, updateCart } = this.props;\n\n    const index = cartProducts.findIndex(p => p.id === product.id);\n    if (index >= 0) {\n      cartProducts.splice(index, 1);\n      updateCart(cartProducts);\n    }\n  };\n\n  proceedToCheckout = () => {\n    const {\n      totalPrice,\n      productQuantity,\n      currencyFormat,\n      currencyId\n    } = this.props.cartTotal;\n\n    if (!productQuantity) {\n      alert('Add some product in the cart!');\n    } else {\n      alert(\n        `Checkout - Subtotal: ${currencyFormat} ${formatPrice(\n          totalPrice,\n          currencyId\n        )}`\n      );\n    }\n  };\n\n  changeProductQuantity = changedProduct => {\n    const { cartProducts, updateCart } = this.props;\n\n    const product = cartProducts.find(p => p.id === changedProduct.id);\n    product.quantity = changedProduct.quantity;\n    if (product.quantity <= 0) {\n      this.removeProduct(product);\n    }\n    updateCart(cartProducts);\n  }\n\n  render() {\n    const { cartTotal, cartProducts, removeProduct, changeProductQuantity } = this.props;\n\n    const products = cartProducts.map(p => {\n      return (\n        <CartProduct product={p} removeProduct={removeProduct} changeProductQuantity={changeProductQuantity} key={p.id} />\n      );\n    });\n\n    let classes = ['float-cart'];\n\n    if (!!this.state.isOpen) {\n      classes.push('float-cart--open');\n    }\n\n    return (\n      <div className={classes.join(' ')}>\n        {/* If cart open, show close (x) button */}\n        {this.state.isOpen && (\n          <div\n            onClick={() => this.closeFloatCart()}\n            className=\"float-cart__close-btn\"\n          >\n            X\n          </div>\n        )}\n\n        {/* If cart is closed, show bag with quantity of product and open cart action */}\n        {!this.state.isOpen && (\n          <span\n            onClick={() => this.openFloatCart()}\n            className=\"bag bag--float-cart-closed\"\n          >\n            <span className=\"bag__quantity\">{cartTotal.productQuantity}</span>\n          </span>\n        )}\n\n        <div className=\"float-cart__content\">\n          <div className=\"float-cart__header\">\n            <span className=\"bag\">\n              <span className=\"bag__quantity\">{cartTotal.productQuantity}</span>\n            </span>\n            <span className=\"header-title\">Cart</span>\n          </div>\n\n          <div className=\"float-cart__shelf-container\">\n            {products}\n            {!products.length && (\n              <p className=\"shelf-empty\">\n                Add some products in the cart <br />\n                :)\n              </p>\n            )}\n          </div>\n\n          <div className=\"float-cart__footer\">\n            <div className=\"sub\">SUBTOTAL</div>\n            <div className=\"sub-price\">\n              <p className=\"sub-price__val\">\n                {`${cartTotal.currencyFormat} ${formatPrice(\n                  cartTotal.totalPrice,\n                  cartTotal.currencyId\n                )}`}\n              </p>\n              <small className=\"sub-price__installment\">\n                {!!cartTotal.installments && (\n                  <span>\n                    {`OR UP TO ${cartTotal.installments} x ${\n                      cartTotal.currencyFormat\n                      } ${formatPrice(\n                        cartTotal.totalPrice / cartTotal.installments,\n                        cartTotal.currencyId\n                      )}`}\n                  </span>\n                )}\n              </small>\n            </div>\n            <div >\n              <label>\n                Nombre:\n                <input type=\"text\" name=\"name\" />\n              </label>\n              <label>\n                Direccion:\n                <input type=\"text\" name=\"address\" />\n              </label>\n              <label>\n                Telefono:\n                <input type=\"number\" name=\"phone\" />\n              </label>\n            </div>\n            <div onClick={() => this.proceedToCheckout()} className=\"buy-btn\">\n              Checkout\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  cartProducts: state.cart.products,\n  newProduct: state.cart.productToAdd,\n  productToRemove: state.cart.productToRemove,\n  productToChange: state.cart.productToChange,\n  cartTotal: state.total.data\n});\n\nexport default connect(\n  mapStateToProps,\n  { loadCart, updateCart, removeProduct, changeProductQuantity }\n)(FloatCart);\n"]},"metadata":{},"sourceType":"module"}